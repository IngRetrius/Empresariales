# ===========================================
# INSUMO MICROSERVICE - CONFIGURATION
# Universidad de Ibagué - Microservicio C
# ===========================================

# ===========================================
# SERVER CONFIGURATION
# ===========================================
server.port=${MICROSERVICIO_C_PORT:8082}
server.servlet.context-path=/

# ===========================================
# APPLICATION INFO
# ===========================================
spring.application.name=insumo-microservice

# ===========================================
# DATABASE CONFIGURATION (Oracle)
# ===========================================
# Oracle Database URL
spring.datasource.url=jdbc:oracle:thin:@${MICROSERVICIO_C_ORACLE_HOST:localhost}:${MICROSERVICIO_C_ORACLE_PORT:1521}:${MICROSERVICIO_C_ORACLE_SID:XE}
spring.datasource.username=${MICROSERVICIO_C_ORACLE_USERNAME:system}
spring.datasource.password=${MICROSERVICIO_C_ORACLE_PASSWORD:admin}
spring.datasource.driver-class-name=oracle.jdbc.OracleDriver

# Connection pool settings (HikariCP)
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000

# ===========================================
# JPA / HIBERNATE CONFIGURATION
# ===========================================
# Options: none, validate, update, create, create-drop
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.OracleDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true
spring.jpa.open-in-view=false

# Oracle specific settings
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ===========================================
# JACKSON (JSON) CONFIGURATION
# ===========================================
spring.jackson.time-zone=America/Bogota
spring.jackson.date-format=yyyy-MM-dd'T'HH:mm:ss
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.serialization.indent-output=true

# ===========================================
# CORS CONFIGURATION
# ===========================================
# CORS allowed origins (use comma-separated list or * for all)
cors.allowed-origins=*
# CORS allowed methods
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
# CORS allowed headers
cors.allowed-headers=*
# Allow credentials
cors.allow-credentials=false
# Exposed headers
cors.exposed-headers=Authorization,Content-Type
# Max age for preflight requests (in seconds)
cors.max-age=3600
# API path pattern
cors.api-path=/api/**
# Actuator path pattern
cors.actuator-path=/actuator/**

# ===========================================
# LOGGING CONFIGURATION
# ===========================================
logging.level.co.unibague.agropecuario.insumos=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# ===========================================
# ACTUATOR ENDPOINTS (Etapa 3 - Health Checks)
# ===========================================
management.endpoints.web.exposure.include=health,info,metrics
# Show detailed health information
management.endpoint.health.show-details=always
management.endpoint.health.show-components=always
# Enable specific health indicators
management.health.db.enabled=true
# Actuator base path (default is /actuator)
management.endpoints.web.base-path=/actuator

# ===========================================
# DEVTOOLS (Development only)
# ===========================================
spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true

# ===========================================
# BUSINESS LOGIC CONSTANTS
# ===========================================
# ID Generation Prefixes
app.id.insumo-prefix=INS
app.id.padding=3

# Insumo constraints
app.insumo.min-cantidad=1
app.insumo.max-cantidad=1000000
app.insumo.min-costo=0.01
app.insumo.max-costo=10000000.0

# ===========================================
# MICROSERVICIO A-B INTEGRATION
# ===========================================
# URL del Microservicio A-B para validación de integridad
app.microservicio-ab.base-url=${MICROSERVICIO_AB_URL:http://localhost:8081}
app.microservicio-ab.timeout=5000
app.microservicio-ab.max-retries=3

# ===========================================
# TIMEZONE CONFIGURATION
# ===========================================
app.timezone=America/Bogota
